{% extends "layout.html" %}

{% block title %}
    Home - StudyBud
{% endblock %}

{% block left_side_bar %}
  <a href="{% url 'rooms' %}" class="nav-link">All Topics<span class="badge bg-secondary float-end">{{topics.count}}</span></a>
  {% for topic in topics %}
    <a href="{% url 'rooms' %}?q={{topic.name}}" class="nav-link">{{topic.name}} <span class="badge bg-secondary float-end">{{topic.room_set.count}}</span></a>
  {% endfor %}
{% endblock %}

{% block content %}
<style>
  /* Keep original dark card color theme */
  .room-card {
    background-color: #1c1c1e; /* dark theme - close to your original bg-dark */
    border: 1px solid #333;    /* subtle border */
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 2px 6px rgba(0,0,0,0.6);
    transition: box-shadow 0.2s ease;
  }
  .room-card:hover {
    box-shadow: 0 6px 12px rgba(0,0,0,0.9);
  }

  .room-host-avatar {
    width: 36px;
    height: 36px;
  }

  /* Mobile improvements */
  @media (max-width: 575.98px) {
    .room-card {
      padding: 1rem 0.75rem;
    }

    .room-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
      flex-wrap: wrap;
    }

    .room-header-left,
    .room-header-right {
      flex: 1 1 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .room-header-left {
      margin-bottom: 0.5rem;
    }

    .room-name {
      margin: 0.5rem 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: white;
      text-decoration: none;
    }

    .room-footer {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .participants {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      color: #bbb;
    }

    .btn-group {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-start;
    }
  }

  /* Desktop layout */
  @media (min-width: 576px) {
    .room-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.75rem;
    }

    .room-header-left {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .room-header-right small,
    .room-header-right .badge {
      display: block;
      text-align: right;
    }

    .room-name {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 0.75rem;
      color: white;
      text-decoration: none;
      display: inline-block;
    }

    .room-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .participants {
      color: #bbb;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .btn-group {
      display: flex;
      gap: 0.5rem;
    }
  }
</style>

    <div class="row g-4">
        <!-- Main Content -->
        <div class="col-12">
            <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-4">
                <div>
                    <h1 class="h3 fw-bold mb-1">ROOMS</h1>
                    <p class="text-secondary mb-0">{{ rooms.count }} Rooms available</p>
                </div>
                <a href="{% url 'create-room' %}" class="btn btn-primary mt-3 mt-sm-0">
                    <i class="bi bi-plus-lg me-1"></i> Create Room
                </a>
            </div>

            {% comment %} Rooms Feed {% endcomment %}
            {% include 'base/components/rooms_feed.html' %}
            
        </div>
    </div>
</div>

{% endblock %}

<!-- Right Sidebar -->
{% block rightSidebar %}
  {% include 'base/components/top_hosts.html' %}
  {% include 'base/components/recent_activity.html' %}
{% endblock %}